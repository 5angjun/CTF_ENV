#Download and setting ubuntu 16.04
FROM ubuntu:16.04
MAINTAINER psj <best_collin@naver.com>
ENV TZ Asia/Seoul
ENV PYTHONIOENCODING UTF-8
ENV LC_CTYPE C.UTF-8

#32bit essential
# Install essential tools for gdb-peda & pwntools
RUN	dpkg --add-architecture i386
RUN	apt -y update
RUN	apt install -y vim python3 python3-dev python3-pip libssl-dev libffi-dev gdb wget curl gcc make git libc6:i386 libncurses5:i386 libstdc++6:i386 ca-certificates patch pkg-config strace ltrace file upx-ucl netcat ruby-full 

# Install Pwntools
RUN     python3 -m pip install --upgrade pip
RUN     python3 -m pip install --upgrade setuptools
RUN     python3 -m pip install --upgrade git+https://github.com/Gallopsled/pwntools.git@dev3
RUN apt install python python-pip zsh cmake time  -y
RUN pip3 install unicorn
RUN pip3 install keystone-engine 
RUN pip3 install
RUN pip3 install capstone ropper

RUN pip install pwntools
#set zsh
RUN wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | zsh || true

RUN mkdir -p "$HOME/.zsh"
RUN git clone https://github.com/sindresorhus/pure.git "$HOME/.zsh/pure"
RUN echo "fpath+=("$HOME/.zsh/pure")\nautoload -U promptinit; promptinit\nprompt pure" >> ~/.zshrc

RUN git clone https://github.com/zsh-users/zsh-syntax-highlighting.git
RUN echo "source ./zsh-syntax-highlighting/zsh-syntax-highlighting.zsh" >> ~/.zshrc

RUN git clone https://github.com/zsh-users/zsh-autosuggestions ~/.zsh/zsh-autosuggestions
RUN echo "source ~/.zsh/zsh-autosuggestions/zsh-autosuggestions.zsh" >> ~/.zshrc
RUN echo "ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=111'" >> ~/.zshrc

# Install peda-heap
RUN	git clone https://github.com/Mipu94/peda-heap.git ~/peda-heap
RUN	echo "source ~/peda-heap/peda.py" >> ~/.gdbinit

# Pwntools-ruby
RUN     gem install pwntools

#one gadget
#RUN apt-get install ruby -y
#RUN gem install one_gadget -v 1.7.3

# one-gadget
RUN gem install one_gadget

